# Compiling the C Library

## Creating the shared library and header files:

```cmd
go build -o lib_udsclient.so -buildmode=c-shared cclient.go
```
- this creates the header and shared library files from the cclient.go file.

## Creating the the static library and header files:

```cmd
go build -o lib_udsclient.a -buildmode=c-archive ./cclient.go
```
- this creates the shared library and header files

## Usage

After creating the library and header files as described in the previous steps,
this is how to use the functions generated by cgo

```c
char* GetUdsClientVersion()
``` 
This returns the version of the handshake on your local machine/client.

```c
char* GetUdsServerVersion()
``` 
This returns the version of the handshake on the server/host.

```c
int RequestXskMapFd(char* device)
``` 
This requests an xskmap Fd for a specified device.

```c
int RequestBusyPoll(int busyTimeout, int busyBudget, int fd)
``` 
This requests a busy poll for a specific device by using it's fd, and specifying a timeout and a budget.

```c
void CleanUpConnection()
``` 
After all the other functions are called, this needs to be called after all the work you need to do is done,
so that the connection to the UDS can be cleaned up.